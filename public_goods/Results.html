{{ block title }}Results{{ endblock }}

{{ block content }}

<style>
  .results-card {
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    background: #fff;
  }
  .results-title {
    margin-bottom: 12px;
  }
  .table thead th {
    background: #f8fafc;
  }
</style>

<div class="results-card">
  <h3 class="results-title">Contributions in your group</h3>

  <table class="table table-sm">
    <thead>
      <tr>
        <th>Player</th>
        <th>Contribution</th>
      </tr>
    </thead>
    <tbody>
      {% for row in contributions_table %}
        <tr>
          <td>{{ row.id_in_group }}</td>
          <td>{{ row.contribution }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="results-card">
  <h3 class="results-title">Bar chart of contributions</h3>
  <canvas id="contribChart" height="120"></canvas>
</div>

<script>
  // Datos listos para usarse en el gr√°fico (se dibuja en la tarea 4)
  const labels = {{ chart_labels_json|safe }};
  const values = {{ chart_values_json|safe }};

  const ctx = document.getElementById('contribChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Contribution',
        data: values,
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>


{{ next_button }}

{{ endblock }}

